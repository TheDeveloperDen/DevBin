# DevBin Backend - Production Environment Configuration
# Copy this file to .env and configure with your production values

# Environment - MUST be 'prod' for production
APP_ENVIRONMENT=prod

# Server Configuration
APP_PORT=8000
APP_HOST=0.0.0.0
# Set to auto-scale based on CPU cores (recommended for production)
APP_WORKERS=true
# Disable auto-reload in production for stability
APP_RELOAD=false
# Disable debug mode in production (REQUIRED)
APP_DEBUG=false

# Logging Configuration
# Use INFO or WARNING in production to reduce log volume
APP_LOG_LEVEL=INFO
# Use JSON format for structured logging in production (RECOMMENDED)
APP_LOG_FORMAT=json

# Database Configuration
# Use strong credentials and restrict network access
APP_DATABASE_URL=postgresql+asyncpg://devbin_user:CHANGE_ME_STRONG_PASSWORD@db-server:5432/devbin_prod

# Security - HTTPS
# Enable HTTPS redirect if SSL is terminated at the application level
# Keep false if using reverse proxy (nginx, traefik, caddy, etc.)
APP_ENFORCE_HTTPS=false

# Security - CORS
# Specify exact allowed domains (REQUIRED in production)
APP_CORS_DOMAINS=["https://devbin.example.com","https://app.devbin.example.com"]
# Wildcard MUST be disabled in production
APP_ALLOW_CORS_WILDCARD=false

# Trusted Hosts (for X-Forwarded-For header)
# Add your load balancer/proxy IPs
APP_TRUSTED_HOSTS=["10.0.0.0/8","172.16.0.0/12"]

# Paste Configuration
APP_MAX_CONTENT_LENGTH=10000
APP_BASE_FOLDER_PATH=/var/lib/devbin/files
# Higher threshold for production storage
APP_MIN_STORAGE_MB=10240
# Retention policy: 336 hours = 14 days
APP_KEEP_DELETED_PASTES_TIME_HOURS=336

# Storage Configuration
# Options: local, s3, minio (s3/minio recommended for production)
APP_STORAGE_TYPE=s3

# S3 Configuration (when STORAGE_TYPE=s3)
APP_S3_BUCKET_NAME=devbin-prod-pastes
APP_S3_REGION=us-east-1
APP_S3_ACCESS_KEY=AKIAXXXXXXXXXXXXXXXX
APP_S3_SECRET_KEY=CHANGE_ME_SECRET_KEY
# APP_S3_ENDPOINT_URL=  # Optional: custom S3 endpoint URL

# MinIO Configuration (when STORAGE_TYPE=minio)
# APP_S3_BUCKET_NAME=devbin-prod-pastes
# APP_MINIO_ENDPOINT=minio.internal:9000
# APP_MINIO_ACCESS_KEY=CHANGE_ME_ACCESS_KEY
# APP_MINIO_SECRET_KEY=CHANGE_ME_SECRET_KEY
# APP_MINIO_SECURE=true

# Compression settings (optimized for production)
APP_COMPRESSION_ENABLED=true
APP_COMPRESSION_THRESHOLD_BYTES=2048
APP_COMPRESSION_LEVEL=6

# Caching (Redis recommended for production)
APP_CACHE_TYPE=redis
APP_CACHE_SIZE_LIMIT=10000
APP_CACHE_TTL=300

# Redis Configuration (for cache and distributed locking)
APP_REDIS_HOST=redis.internal
APP_REDIS_PORT=6379
APP_REDIS_DB=0
APP_REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD

# Distributed Locking (Redis recommended for multi-instance deployments)
APP_LOCK_TYPE=redis

# Privacy Settings (configure based on your privacy policy)
APP_SAVE_USER_AGENT=false
APP_SAVE_IP_ADDRESS=false

# Optional: Rate limit bypass token for trusted apps/monitoring
# APP_BYPASS_TOKEN=CHANGE_ME_SECURE_RANDOM_TOKEN_HERE
