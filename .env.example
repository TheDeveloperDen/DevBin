# DevBin Backend Environment Configuration

# Environment (dev, staging, prod)
APP_ENVIRONMENT=dev

# Server Configuration
APP_PORT=8000
APP_HOST=0.0.0.0
APP_WORKERS=1
APP_RELOAD=false
APP_DEBUG=false

# Logging Configuration
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
APP_LOG_LEVEL=INFO
# Log format: text (human-readable) or json (structured, for log aggregation)
APP_LOG_FORMAT=text

# Database Configuration
APP_DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/devbin

# Security - HTTPS
# Set to true to redirect HTTP to HTTPS
# Only enable if your deployment terminates SSL directly
# Keep false if using reverse proxy (nginx, traefik, caddy, etc.)
APP_ENFORCE_HTTPS=false

# Security - CORS
# For development (allows all origins):
APP_CORS_DOMAINS=["*"]
APP_ALLOW_CORS_WILDCARD=true

# For production (specify exact domains):
# APP_CORS_DOMAINS=["https://devbin.example.com","https://app.devbin.example.com"]
# APP_ALLOW_CORS_WILDCARD=false

# Trusted Hosts (for X-Forwarded-For header)
APP_TRUSTED_HOSTS=["127.0.0.1"]

# Paste Configuration
APP_MAX_CONTENT_LENGTH=10000
APP_BASE_FOLDER_PATH=./files
APP_MIN_STORAGE_MB=1024
APP_KEEP_DELETED_PASTES_TIME_HOURS=336

# Storage Configuration
# Storage backend: local, s3, or minio (default: local)
APP_STORAGE_TYPE=local

# S3 Configuration (when STORAGE_TYPE=s3)
# APP_S3_BUCKET_NAME=devbin-pastes
# APP_S3_REGION=us-east-1
# APP_S3_ACCESS_KEY=your_access_key
# APP_S3_SECRET_KEY=your_secret_key
# APP_S3_ENDPOINT_URL=  # Optional: custom S3 endpoint URL

# MinIO Configuration (when STORAGE_TYPE=minio)
# APP_S3_BUCKET_NAME=devbin-pastes
# APP_MINIO_ENDPOINT=minio:9000
# APP_MINIO_ACCESS_KEY=minioadmin
# APP_MINIO_SECRET_KEY=minioadmin
# APP_MINIO_SECURE=true

# Compression settings
# Compression is most effective for content >= 2KB (achieves 30-40% compression ratio)
# Smaller content compresses poorly and wastes CPU cycles
APP_COMPRESSION_ENABLED=true
APP_COMPRESSION_THRESHOLD_BYTES=2048
APP_COMPRESSION_LEVEL=6

# Caching
# Cache backend: memory (default) or redis
APP_CACHE_TYPE=memory
APP_CACHE_SIZE_LIMIT=1000
APP_CACHE_TTL=300

# Redis Configuration (when CACHE_TYPE=redis or LOCK_TYPE=redis)
# APP_REDIS_HOST=localhost
# APP_REDIS_PORT=6379
# APP_REDIS_DB=0
# APP_REDIS_PASSWORD=  # Optional password

# Distributed Locking
# Lock backend: file (default) or redis
APP_LOCK_TYPE=file

# Privacy Settings
APP_SAVE_USER_AGENT=false
APP_SAVE_IP_ADDRESS=false

# Optional: Rate limit bypass token for trusted apps
# APP_BYPASS_TOKEN=your_secret_bypass_token_here

# Metrics Authentication
# Optional: Secure the Prometheus /metrics endpoint with Bearer token authentication
# If not set, metrics endpoint remains publicly accessible
# Production deployments should set this to a strong random token
# APP_METRICS_TOKEN=your_secure_random_token_here
# Example generation: openssl rand -hex 32

# Frontend configurations
API_BASE_URL=http://devbin:8000
PORT=3000
ORIGIN=http://localhost:3000 # prevent cross-site post req forbidden from frontend because node can't resolve it's origin
